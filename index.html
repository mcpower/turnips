<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <title>AC:NH Turnips Info</title>
</head>

<body>
  <div class="container" style="padding: 30px;">
    <h1>
      Turnip price patterns in Animal Crossing: New Horizons
    </h1>
    <p>
      <a href="#calculator">Jump to calculator</a>
    </p>
    <p>
      <strong>
        This work would not be possible without <a
          href="https://twitter.com/_Ninji/status/1244818665851289602">@_Ninji's reverse engineering efforts</a>. This
        page is based <em>entirely</em> off of their reverse engineering. Thank you, Ninji!
      </strong>
    </p>
    <p>
      <strong>I’ve personally heard of reports of bell prices which don’t follow any of the below
        patterns.</strong> Take this page - and any work based on Ninji’s reverse engineering - with a grain of
      salt. I personally trust Ninji’s reverse engineering, but it’s possible that the patterns may have changed
      after an update, or some other code overrides the patterns, or people misremembered their bell prices, etc.
    </p>
    <hr />
    <p>Daisy Mae will offer a sell price of 90-110 bells for each turnip. Then, from Monday morning to Saturday
      night, Nook’s Cranny (and its upgrades) will buy turnips with prices that changes every half-day - when
      Nook’s Cranny opens in the morning, and at noon. In total, there are 12 half-days in the week, and 12
      possible prices you can sell turnips for.</p>
    <p><strong>All turnip prices are based on a percentage of Daisy Mae’s sale price on your island</strong> rounded
      up, <a href="https://twitter.com/_Ninji/status/1245097287136706561">except on the first week you buy turnips
        on your own island</a>. As a result, all prices in this page will be a percentage relative to Daisy
      Mae’s sale price on your island. This means that buying turnips at 110 bells isn’t a bad thing - but if you
      have a friend’s island selling them for cheaper, you should buy theirs instead!</p>
    <p>There are 4 turnip price patterns in AC:NH:</p>
    <h3 id="pattern-0">Pattern 0</h3>
    <p><strong>Two decreasing dips.</strong> All prices are <em>90-140%</em>, except for two decreasing dips of 2
      and 3 half-days each where the price starts at <em>60-80%</em> at the start of the dip and decreases by
      <em>4-10%</em> every half-day during the dip.</p>
    <p>The dips are randomly spread throughout the week and have at least one half-day in-between them. The dips
      could be at the very start or end of the week!</p>
    <h3 id="pattern-1">Pattern 1</h3>
    <p><strong>Decreasing, high spike, low.</strong> Starts off at <em>85-90%</em> and goes down by <em>3-5%</em>
      every half-day. Some time between Monday afternoon and Thursday afternoon a 5 half-day spike will start,
      topping out on the 3rd half-day. The prices during the spike will be <em>90-140%</em>, <em>140-200%</em>,
      <strong><em>200-600%</em></strong>, <em>140-200%</em>, <em>90-140%</em>. Afterwards, prices will be
      <em>40-90%</em>.</p>
    <h3 id="pattern-2">Pattern 2</h3>
    <p><strong>Constantly decreasing.</strong> Starts off at <em>85-90%</em> and goes down by <em>3-5%</em> every
      half-day.</p>
    <h3 id="pattern-3">Pattern 3</h3>
    <p><strong>Decreasing, spike, decreasing.</strong> Starts off at <em>40-90%</em> and goes down by <em>3-5%</em>
      every half-day. Some time between Monday morning and Thursday afternoon a 5 half-day spike will start,
      topping out at <em>140-200%</em> on the 4th half-day (which will be referred to as <code>peak</code>%). The
      prices during the spike will be <em>90-140%</em>, <em>90-140%</em>, <em>140-<code>peak</code>%</em> (minus 1
      bell), <em><code>peak</code>%</em>, then <em>140-<code>peak</code>%</em> (minus 1 bell). Afterwards, prices
      will start off at <em>40-90%</em> and drop by <em>3-5%</em> every half-day.</p>
    <p>Note that the spike could start on Monday morning with no initial “decreasing” period!</p>
    <h2 id="pattern-of-patterns">Pattern of patterns</h2>
    <p>The chance that you’ll get a pattern is determined based on the last pattern you got:</p>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Last pattern</th>
          <th>Pattern 0 chance</th>
          <th>Pattern 1 chance</th>
          <th>Pattern 2 chance</th>
          <th>Pattern 3 chance</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">0</td>
          <td>20%</td>
          <td>30%</td>
          <td>15%</td>
          <td>35%</td>
        </tr>
        <tr>
          <th scope="row">1</td>
          <td>50%</td>
          <td>5%</td>
          <td>20%</td>
          <td>25%</td>
        </tr>
        <tr>
          <th scope="row">2</td>
          <td>25%</td>
          <td>45%</td>
          <td>5%</td>
          <td>25%</td>
        </tr>
        <tr>
          <th scope="row">3</td>
          <td>45%</td>
          <td>25%</td>
          <td>15%</td>
          <td>15%</td>
        </tr>
      </tbody>
    </table>
    <h2 id="oddities">Oddities</h2>
    <p>The first time you buy turnips on your own island, <a
        href="https://twitter.com/_Ninji/status/1245097287136706561">you are forced into Pattern 3 and the bell
        price used for calculating sell prices will be randomised</a>.</p>
    <h2 id="calculator">Calculator</h2>
    <p>Put your known prices in below and the calculator will predict the prices based on the patterns above.
      <strong>You can leave any price blank.</strong></p>
    <p>
      Some other people have also made calculators based on Ninji's reverse engineering: <a
        href="https://mikebryant.github.io/ac-nh-turnip-prices/index.html">mikebryant</a>, <a
        href="https://elxris.github.io/Turnip-Calculator/">elxris</a>. Be sure to check them out!
    </p>
    <div class="alert alert-warning" role="alert">
      This calculator is a work in progress!
    </div>
    <form id="calculator-input">
      <div class="row mb-3">
        <div class="form-group col-12 col-sm-4 col-xl-2">
          <label>Buy</label>
          <input id="buy" type="number" class="form-control" min="0" max="700">
        </div>
      </div>

      <div class="row">
        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Mon AM</label>
              <input id="sell0" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Mon PM</label>
              <input id="sell1" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Tue AM</label>
              <input id="sell2" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Tue PM</label>
              <input id="sell3" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Wed AM</label>
              <input id="sell4" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Wed PM</label>
              <input id="sell5" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Thu AM</label>
              <input id="sell6" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Thu PM</label>
              <input id="sell7" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Fri AM</label>
              <input id="sell8" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Fri PM</label>
              <input id="sell9" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-4 col-xl-2">
          <div class="form-row">
            <div class="form-group col-6">
              <label>Sat AM</label>
              <input id="sell10" type="number" class="form-control" min="0" max="700">
            </div>
            <div class="form-group col-6">
              <label>Sat PM</label>
              <input id="sell11" type="number" class="form-control" min="0" max="700">
            </div>
          </div>
        </div>
      </div>
    </form>
    <pre id="calculator-output">

    </pre>
    <!-- TODO: table here -->
    <!-- TODO: "How does this calculator work? v1" -->
    <!-- TODO: "Version history" -->
  </div>

  <script src="./js/turnips.js"></script>
  <script src="./js/calculator.js"></script>
</body>

</html>
